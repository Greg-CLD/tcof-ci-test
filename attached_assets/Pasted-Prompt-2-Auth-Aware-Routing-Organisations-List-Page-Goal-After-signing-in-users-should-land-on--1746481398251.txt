Prompt 2 â€” Auth-Aware Routing & Organisations List Page
Goal
After signing in, users should land on an Organisations overview page (/organisations) rather than the Home/dashboard. This page lists all the organisations they belong to and lets them create new ones.

âœ… Checklist
Routing

Add a new route in your router setup (e.g. in App.tsx or wherever you configure Wouter):

jsx
Copy
Edit
<Route path="/organisations" component={OrganisationList} />
In your login success handler, replace the current redirect with:

ts
Copy
Edit
navigate("/organisations");
Ensure that any direct hits to / when signed in also navigate("/organisations").

OrganisationList Component

Create client/src/pages/OrganisationList.tsx.

On mount, call GET /api/organisations.

Render a card or list item for each organisation with:

Name (clickable â†’ /organisations/:id)

Description

Role badge (owner/member)

If the array is empty, show a friendly message:

â€œYou donâ€™t have any organisations yet. Create one to get started.â€

Create Organisation UI

On the OrganisationList page, add a â€œNew Organisationâ€ button.

Clicking it opens a modal or inline form with fields: Name (required), Description (optional).

On submit, call POST /api/organisations with { name, description }.

On success: close the form, re-fetch the list, and display the new org.

Auth Gating

Wrap the /organisations route in your isAuthenticated check.

If a non-authenticated user hits /organisations, redirect them to / (the public landing page).

Styling & Feedback

Show a spinner while fetching organisations.

Show error toast if the fetch or creation fails.

Use existing UI components (e.g. Card, Button, Modal) for consistency.

âœ… Definition of Done
Sign In â†’ automatically goes to /organisations.

The /organisations page displays the userâ€™s orgs or a â€œno organisationsâ€ message.

â€œNew Organisationâ€ form creates and lists organisations immediately.

Unauthenticated users cannot access /organisations.

ğŸ§ª Smoke Tests
Login Flow

Log out â†’ go to /organsations â†’ youâ€™re redirected to /.

Log in â†’ you land on /organisations.

Empty State

If user has no orgs â†’ see the â€œcreate oneâ€ prompt.

Create Org

Fill â€œNameâ€ and submit â†’ new org appears in list with correct role badge.

List Navigation

Click an org name â†’ navigates to /organisations/:id (404 or placeholder view is OK for now).

